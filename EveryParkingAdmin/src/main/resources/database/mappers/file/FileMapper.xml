<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.everyparking.admin.framework.file.dao.FileDao">

    <select id="getFile" parameterType="hashMap" resultType="hashMap">
        SELECT
            image_no
             , parkingLot_no
             , image_originalName
             , image_url
             , image_writer
             , image_writeDate
             , image_updater
             , image_updateDate
             , image_note
             , convert_name
             , IMG_SIZE
        FROM parkingimages
        WHERE IMAGE_NO = #{ image_no }
    </select>

    <insert id="insertFile" parameterType="hashMap">
        <selectKey resultType="int"  keyColumn="image_no" keyProperty="image_no" order="AFTER">
            select MAX(image_no) from parkingimages
        </selectKey>
        INSERT INTO parkingimages(
            parkingLot_no
            , image_originalName
            , image_url
            , image_writer
            , image_writeDate
            , image_updater
            , image_updateDate
            , image_note
            , convert_name
            , IMG_SIZE
        )values(
            #{ parkingLot_no }
            , #{ image_originalName }
            , #{ image_url }
            , #{ image_writer }
            , #{ image_writeDate }
            , #{ image_updater }
            , #{ image_updateDate }
            , #{ image_note }
            , #{ convert_name }
            , #{ IMG_SIZE }
        )
    </insert>
</mapper>